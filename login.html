<!DOCTYPE html>
<html>
    <head>
        <title>Socket.IO chat</title>
        <link href="static/style.css" type="text/css" rel="stylesheet" />
    </head>
    <body>
        <ul id="messages"></ul>
        <form id="nickname"><input id="name" type="text" required autocomplete="off" /><button>Join Room</button></form>

        <script src="/socket.io/socket.io.js"></script>
        <script>
            (function() {
                const nicknameForm = document.querySelector("#nickname");
                nicknameForm.addEventListener("submit", e => {
                    e.preventDefault();
                    const data = { username: e.target.name.value };
                    fetch("http://localhost:4300/loginUser", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify(data),
                    });
                    return false;
                });

                // const socket = io();
                // const messagesList = document.querySelector("#messages");
                // socket.on(`chat_message`, msg => {
                //     const listItem = document.createElement(`li`);
                //     listItem.textContent = msg;
                //     messagesList.appendChild(listItem);
                // });
            })();
        </script>
    </body>
</html>
