<ion-header>
    <ion-toolbar>
        <ion-title>Six Handed Euchre - Games</ion-title>
        <ion-buttons slot="end">
            <ion-button routerLink="/login">
                Logout
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
    <ion-card>
        <ion-card-header>
            <ion-card-title>Welcome to game: {{ gameData?.gameName }}</ion-card-title>
        </ion-card-header>
        <ion-card-content>
            <h2>Players in this room</h2>
            <ul>
                <li *ngFor="let player of players">{{ player }}</li>
            </ul>
            <div class="seats">
                <div *ngFor="let seat of gameData?.seats" class="seat">
                    <p>Seat {{ seat.seatNumber }}</p>
                    <ng-container *ngIf="!seat.userName">
                        <p>Waiting for player to join.</p>
                    </ng-container>
                    <ng-container *ngIf="!seat.userName && !hasTakenSeat">
                        <ion-button type="primary" (click)="takeSeat($event, seat.seatNumber)">
                            Join Seat {{ seat.seatNumber }}
                        </ion-button>
                    </ng-container>
                    <div class="seat--player-info" *ngIf="seat.userName">
                        <div class="seat--player-info--name">
                            <p>Player: {{ seat.userName }}</p>
                        </div>
                        <div class="seat--player-info--leave">
                            <ion-button
                                *ngIf="seat.userName === currentUser.name"
                                fill="outline"
                                type="primary"
                                (click)="leaveSeat()"
                            >
                                Leave Seat {{ seat.seatNumber }}
                            </ion-button>
                        </div>
                    </div>
                    <!-- <div class="player-hand" *ngIf="gameData?.hasGameStarted && seat?.hand">
                        <div class="player-hand--cards" *ngFor="let card of seat?.hand">
                            {{ card.cardValue }} - {{ card.suit }}
                        </div>
                    </div> -->
                    <ion-button
                        *ngIf="gameData?.hasGameStarted && seat.isYourTurn"
                        fill="outline"
                        type="primary"
                        (click)="takeYourTurn($event, seat.seatNumber)"
                    >
                        Take Your Turn
                    </ion-button>
                </div>
            </div>
            <ion-button
                (click)="startGame($event)"
                *ngIf="gameData?.startGame && !gameData?.hasGameStarted"
                expand="block"
                type="primary"
            >
                Start Game
            </ion-button>
        </ion-card-content>
    </ion-card>
    <ion-button color="secondary" fill="clear" routerLink="/games" (click)="leaveSeat()">
        <ion-icon slot="start" name="chevron-back-outline"></ion-icon>
        Back to games dashboard
    </ion-button>
</ion-content>
